var F=Object.defineProperty;var S=(r,e,t)=>e in r?F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var h=(r,e,t)=>(S(r,typeof e!="symbol"?e+"":e,t),t);import{d as g,o as p,c as C,u as v,R as T,t as L,a as k,b as d,e as M,f as O,g as $,F as z,h as H,i as V,j as W}from"./vendor.26ea7649.js";const P=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}};P();const q=g({setup(r){return(e,t)=>(p(),C(v(T)))}});class G{constructor(){h(this,"cells");this.cells=new m}cellIsAlive(e,t){return this.cells.has(e,t)}toggleCell(e,t){this.cellIsAlive(e,t)?this.cells.delete(e,t):this.cells.add(e,t)}getDeadNeighbors(e,t){const n=new m;return this.cellIsAlive(e-1,t)||n.add(e-1,t),this.cellIsAlive(e+1,t)||n.add(e+1,t),this.cellIsAlive(e,t-1)||n.add(e,t-1),this.cellIsAlive(e,t+1)||n.add(e,t+1),this.cellIsAlive(e-1,t-1)||n.add(e-1,t-1),this.cellIsAlive(e+1,t-1)||n.add(e+1,t-1),this.cellIsAlive(e-1,t+1)||n.add(e-1,t+1),this.cellIsAlive(e+1,t+1)||n.add(e+1,t+1),n}gameTick(){const e=new m;this.cells.forEach((t,n)=>{const l=this.getDeadNeighbors(t,n);(l.length==6||l.length==5)&&e.add(t,n),l.forEach((s,i)=>{this.getDeadNeighbors(s,i).length==5&&e.add(s,i)})}),this.cells=e}clear(){this.cells.clear()}}class m{constructor(){h(this,"cells");h(this,"length");this.cells=new Map,this.length=0}has(e,t){const n=this.cells.get(e);return n==null?!1:n.has(t)}add(e,t){const n=this.cells.get(e);if(n==null){const l=new Set;l.add(t),this.cells.set(e,l)}else n.add(t);this.length++}delete(e,t){const n=this.cells.get(e);return n==null||!n.has(t)?!1:(this.length--,n.size==1?this.cells.delete(e):this.cells.get(e).delete(t),!0)}forEach(e){this.cells.forEach((t,n)=>{t.forEach(l=>{e(n,l)})})}clear(){this.cells=new Map}}const j={class:"control-container"},K={class:"control-panel"},Y=d("button",{class:"control"},"Help",-1),J=g({props:{toggleRun:Function,clearFunction:Function,updateDelayCallback:Function,isRunning:Boolean},setup(r){const e=r;function t(){e.toggleRun(),console.log(e.isRunning)}function n(s){e.updateDelayCallback(s.target)}let l=L(e,"isRunning");return(s,i)=>(p(),k("div",j,[d("div",K,[d("button",{class:"control",onClick:i[0]||(i[0]=u=>t())},"Start"),d("button",{class:"control",onClick:i[1]||(i[1]=u=>e.clearFunction())},"Clear"),Y,d("input",{class:"control-slider",type:"range",min:"4",max:"500",value:"250",onChange:i[2]||(i[2]=u=>n(u))},null,32),d("output",null,M(v(l)),1)])]))}});const Q=g({setup(r){let e,t,n=new G,l=20,s=!1,i=0,u=250;O(()=>{e=document.getElementById("conway-canvas"),t=e.getContext("2d"),e.width=e.offsetWidth,e.height=e.offsetHeight,R.observe(e),f()});function f(){t.clearRect(0,0,e.width,e.height),t.beginPath(),t.fillStyle="white",n.cells.forEach((o,a)=>{t.fillRect(o*l,a*l,l,l)});for(let o=0;o<e.width;o+=l)t.moveTo(o,0),t.lineTo(o,e.height);for(let o=0;o<e.height;o+=l)t.moveTo(0,o),t.lineTo(e.width,o);t.strokeStyle="rgba(80, 80, 80, 1)",t.stroke()}const R=new ResizeObserver(o=>{for(let a of o){let c=a.target;c.width=c.offsetWidth,c.height=c.offsetHeight}f()});function w(){n.gameTick(),f()}function A(){s&&_(),n.clear(),f()}function N(){s?_():y()}function y(){w(),s=!0,b()}function _(){s=!1,clearTimeout(i)}function b(){s&&(i=setTimeout(()=>{w(),b()},u))}function B(o){if(s==!0)return;let a=(o.x-o.x%l)/l,c=(o.y-o.y%l)/l;n.toggleCell(a,c),f()}function D(o){l=l-o.deltaY%(.2*l),f()}function E(o){u=parseInt(o.value),s&&(_(),y())}return(o,a)=>(p(),k(z,null,[d("canvas",{id:"conway-canvas",onMousedown:a[0]||(a[0]=c=>B(c)),onWheel:a[1]||(a[1]=c=>D(c))},null,32),$(J,{"toggle-run":N,"clear-function":A,"update-delay-callback":E,"is-running":v(s)},null,8,["is-running"])],64))}}),U=g({setup(r){return(e,t)=>(p(),C(Q))}}),X=H({history:V("/"),routes:[{path:"/",name:"conway",component:U}]}),I=W(q);I.use(X);I.mount("#app");
